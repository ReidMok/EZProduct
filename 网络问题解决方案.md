# 网络问题解决方案

## 🔴 当前问题

错误：无法连接到 Google Cloud Storage（`partners-extensions-scripts-bucket.storage.googleapis.com`）

这是网络连接问题，Shopify CLI 需要从 Google Cloud Storage 获取应用部署信息。

## ✅ 解决方案

### 方案1：等待网络恢复（推荐）

如果这是临时网络问题：

1. **检查网络连接**
   ```bash
   ping google.com
   ```

2. **如果网络恢复**（ping 能通），重新启动：
   ```bash
   npm run dev
   ```

### 方案2：使用 Remix 开发服务器（绕过Shopify CLI）

如果网络问题持续，可以暂时使用 Remix 的开发服务器：

```bash
# 安装 Remix 开发依赖（如果还没有）
npm install

# 直接运行 Remix 开发服务器
npx remix dev
```

**注意**：这种方式不会自动处理 Shopify OAuth，但可以测试应用的基本功能。

### 方案3：检查并修复网络

1. **检查防火墙设置**
   - 确保允许访问 Google Cloud Storage
   - 检查是否有代理设置

2. **尝试使用代理**（如果有）
   ```bash
   export HTTP_PROXY=your_proxy
   export HTTPS_PROXY=your_proxy
   npm run dev
   ```

3. **切换网络环境**
   - 尝试使用移动热点
   - 或使用其他网络

### 方案4：使用 ngrok 手动创建隧道

如果 Cloudflare 和 Google Cloud Storage 都无法连接：

1. **安装 ngrok**
   ```bash
   brew install ngrok
   # 或从 https://ngrok.com/download 下载
   ```

2. **启动 Remix 开发服务器**（在另一个终端）
   ```bash
   npx remix dev
   ```

3. **创建 ngrok 隧道**（在另一个终端）
   ```bash
   ngrok http 3000
   ```

4. **更新 Shopify Dashboard 中的 URL**
   - 使用 ngrok 提供的 URL（例如：`https://xxx.ngrok.io`）
   - 更新 App URL 和 Redirect URLs

## 🎯 推荐操作

### 如果网络暂时无法恢复：

1. **先完成代码开发**
   - 所有代码和配置已完成
   - 可以继续开发功能

2. **稍后网络恢复时再测试**
   - 等网络恢复后运行 `npm run dev`
   - 或使用方案4（ngrok）

### 如果网络已恢复：

```bash
# 测试网络
ping google.com

# 如果ping通了，清理缓存并重启
rm -rf .shopify
npm run dev
```

## 📝 当前状态总结

- ✅ 所有代码已就绪
- ✅ 所有配置已完成
- ✅ 数据库已创建
- ✅ 证书已生成
- ❌ 网络连接问题阻止了启动

## 💡 建议

由于这是网络连接问题，建议：

1. **先解决网络问题**（检查网络、VPN、防火墙）
2. **或使用替代方案**（ngrok、等待网络恢复）
3. **代码本身没有问题**，网络恢复后应该能正常运行

## 🆘 如果所有方案都不行

可以考虑：
- 使用生产环境部署（Vercel），不依赖本地开发
- 或联系Shopify支持询问是否有其他方式

