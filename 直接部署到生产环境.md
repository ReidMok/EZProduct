# ğŸš€ ç›´æ¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆè·³è¿‡æœ¬åœ°æµ‹è¯•ï¼‰

## âœ… ä¸ºä»€ä¹ˆç›´æ¥éƒ¨ç½²æ›´å¥½ï¼Ÿ

1. **é¿å…æœ¬åœ°ç¯å¢ƒé—®é¢˜**
   - ä¸éœ€è¦å¤„ç† HTTPS/HTTP æ··ç”¨
   - ä¸éœ€è¦å¤„ç† Shopify CLI ä»£ç†
   - ä¸éœ€è¦å¤„ç† localhost è¯ä¹¦é—®é¢˜

2. **æ›´æ¥è¿‘ç”Ÿäº§ç¯å¢ƒ**
   - ä½¿ç”¨çœŸå®çš„ HTTPS URL
   - OAuth æµç¨‹æ›´ç¨³å®š
   - æ›´å®¹æ˜“è°ƒè¯•

3. **èŠ‚çœæ—¶é—´**
   - ä¸éœ€è¦åå¤è°ƒè¯•æœ¬åœ°ç¯å¢ƒ
   - éƒ¨ç½²åç›´æ¥æµ‹è¯•

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šå‡†å¤‡éƒ¨ç½²ç¯å¢ƒ

#### 1.1 åˆ›å»º Vercel è´¦æˆ·ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

è®¿é—®ï¼šhttps://vercel.com/signup

#### 1.2 åˆ›å»º Supabase è´¦æˆ·ï¼ˆç”¨äº PostgreSQL æ•°æ®åº“ï¼‰

è®¿é—®ï¼šhttps://supabase.com/dashboard

### æ­¥éª¤2ï¼šéƒ¨ç½²æ•°æ®åº“åˆ° Supabase

1. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç™»å½• Supabase Dashboard
   - ç‚¹å‡» "New Project"
   - å¡«å†™é¡¹ç›®ä¿¡æ¯
   - è®°å½•æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼ˆæ ¼å¼ï¼š`postgresql://...`ï¼‰

2. **æ›´æ–° Prisma Schema**

   å°† `prisma/schema.prisma` ä¸­çš„ `datasource` æ”¹ä¸º PostgreSQLï¼š

   ```prisma
   datasource db {
     provider = "postgresql"
     url      = env("DATABASE_URL")
   }
   ```

3. **è¿è¡Œæ•°æ®åº“è¿ç§»**

   ```bash
   cd /Users/Zhuanz/cursor/resinmemory_product/ezproduct
   # è®¾ç½® Supabase æ•°æ®åº“ URL
   export DATABASE_URL="ä½ çš„Supabaseæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²"
   npm run db:migrate
   ```

### æ­¥éª¤3ï¼šéƒ¨ç½²åº”ç”¨åˆ° Vercel

#### 3.1 å®‰è£… Vercel CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
npm install -g vercel
```

#### 3.2 ç™»å½• Vercel

```bash
vercel login
```

#### 3.3 éƒ¨ç½²åº”ç”¨

```bash
cd /Users/Zhuanz/cursor/resinmemory_product/ezproduct
vercel
```

æŒ‰ç…§æç¤ºï¼š
- é€‰æ‹©é¡¹ç›®åç§°ï¼ˆæˆ–ä½¿ç”¨é»˜è®¤ï¼‰
- é€‰æ‹©æ¡†æ¶ï¼šRemix
- ç¡®è®¤è®¾ç½®

#### 3.4 é…ç½®ç¯å¢ƒå˜é‡

åœ¨ Vercel Dashboard ä¸­ï¼Œè¿›å…¥é¡¹ç›®è®¾ç½® â†’ Environment Variablesï¼Œæ·»åŠ ï¼š

```
SHOPIFY_API_KEY=ä½ çš„Shopify_API_Key
SHOPIFY_API_SECRET=ä½ çš„Shopify_API_Secret
SCOPES=write_products,read_products,write_product_listings,read_product_listings
SHOPIFY_APP_URL=https://ä½ çš„åº”ç”¨.vercel.app
DATABASE_URL=ä½ çš„Supabaseæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
GEMINI_API_KEY=ä½ çš„Gemini_API_Key
NODE_ENV=production
```

### æ­¥éª¤4ï¼šæ›´æ–° Shopify Partners Dashboard é…ç½®

1. **è¿›å…¥åº”ç”¨è®¾ç½®**
   - ç™»å½• https://partners.shopify.com/
   - è¿›å…¥ä½ çš„åº”ç”¨
   - è¿›å…¥ "App setup" æˆ– "åº”ç”¨è®¾ç½®"

2. **æ›´æ–° App URL**
   - **App URL**: `https://ä½ çš„åº”ç”¨.vercel.app`
   - ä¿å­˜

3. **æ›´æ–° Redirect URLs**
   - **Allowed redirection URL(s)**:
     ```
     https://ä½ çš„åº”ç”¨.vercel.app/auth/callback
     https://ä½ çš„åº”ç”¨.vercel.app/auth/shopify/callback
     https://ä½ çš„åº”ç”¨.vercel.app/api/auth/callback
     ```
   - ä¿å­˜

4. **æ›´æ–°åº”ç”¨ç‰ˆæœ¬é…ç½®**
   - è¿›å…¥ "Versions" â†’ ä½ çš„ç‰ˆæœ¬
   - æ›´æ–° **App URL** ä¸º `https://ä½ çš„åº”ç”¨.vercel.app`
   - æ›´æ–° **Redirect URLs** ä¸ºä¸Šé¢çš„ä¸‰ä¸ª URL
   - ä¿å­˜å¹¶å‘å¸ƒ

### æ­¥éª¤5ï¼šæ›´æ–° shopify.app.toml

```toml
name = "EZProduct"
client_id = "46a6a6c60a57cd723019c930a072aa10"
application_url = "https://ä½ çš„åº”ç”¨.vercel.app"
embedded = true

[access_scopes]
scopes = "write_products,read_products,write_product_listings,read_product_listings"

[auth]
redirect_urls = [
  "https://ä½ çš„åº”ç”¨.vercel.app/auth/callback",
  "https://ä½ çš„åº”ç”¨.vercel.app/auth/shopify/callback",
  "https://ä½ çš„åº”ç”¨.vercel.app/api/auth/callback"
]
```

### æ­¥éª¤6ï¼šå®Œæˆ OAuth å®‰è£…

1. **åœ¨ Shopify åå°å®‰è£…åº”ç”¨**
   - è®¿é—®ï¼š`https://ä½ çš„å•†åº—.myshopify.com/admin/apps`
   - æ‰¾åˆ° "EZProduct" åº”ç”¨
   - ç‚¹å‡» "å®‰è£…" æˆ– "Install"

2. **å®Œæˆæˆæƒ**
   - ç‚¹å‡» "Install" æŒ‰é’®
   - å®Œæˆ OAuth æµç¨‹

3. **æµ‹è¯•åº”ç”¨**
   - æ‰“å¼€åº”ç”¨ç•Œé¢
   - è¾“å…¥äº§å“å…³é”®è¯
   - æµ‹è¯•äº§å“ç”ŸæˆåŠŸèƒ½

## ğŸ¯ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤æ€»ç»“

```bash
# 1. å®‰è£… Vercel CLI
npm install -g vercel

# 2. ç™»å½• Vercel
vercel login

# 3. éƒ¨ç½²åº”ç”¨
cd /Users/Zhuanz/cursor/resinmemory_product/ezproduct
vercel

# 4. åœ¨ Vercel Dashboard ä¸­é…ç½®ç¯å¢ƒå˜é‡
# 5. åœ¨ Shopify Partners Dashboard ä¸­æ›´æ–° URL
# 6. åœ¨ Shopify åå°å®‰è£…åº”ç”¨
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿ç§»**
   - éƒ¨ç½²å‰ç¡®ä¿æ•°æ®åº“è¿ç§»å·²è¿è¡Œ
   - æˆ–è€…ä½¿ç”¨ Vercel çš„ Build Command è‡ªåŠ¨è¿è¡Œè¿ç§»

2. **ç¯å¢ƒå˜é‡**
   - ç¡®ä¿æ‰€æœ‰ç¯å¢ƒå˜é‡éƒ½å·²é…ç½®
   - ç‰¹åˆ«æ˜¯ `DATABASE_URL` å’Œ `SHOPIFY_API_SECRET`

3. **URL æ›´æ–°**
   - ç¡®ä¿ Shopify Partners Dashboard ä¸­çš„ URL ä¸ Vercel éƒ¨ç½²çš„ URL ä¸€è‡´
   - æ›´æ–°åéœ€è¦ç­‰å¾…å‡ åˆ†é’Ÿç”Ÿæ•ˆ

## âœ… éƒ¨ç½²åçš„ä¼˜åŠ¿

- âœ… ä½¿ç”¨çœŸå®çš„ HTTPS URL
- âœ… OAuth æµç¨‹æ›´ç¨³å®š
- âœ… ä¸éœ€è¦å¤„ç†æœ¬åœ°ç¯å¢ƒé—®é¢˜
- âœ… æ›´å®¹æ˜“è°ƒè¯•å’Œæµ‹è¯•
- âœ… å¯ä»¥éšæ—¶è®¿é—®åº”ç”¨

