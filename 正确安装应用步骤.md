# 🚀 正确安装应用步骤

## 🔴 当前问题

从截图看，Shopify 后台显示 "localhost 发送的响应无效。"，这说明：
- ❌ 应用还没有完成 OAuth 安装
- ❌ 或者会话无效

## ✅ 正确安装步骤

### 方法1：使用 Preview URL（推荐）

**步骤1：找到 Preview URL**

在 Terminal 1（Shopify CLI）中，查找这一行：

```
Preview URL: https://ezproduct-test-store.myshopify.com/admin/oauth/redirect_from_cli?client_id=46a6a6c60a57cd723019c930a072aa10
```

**步骤2：复制并打开 Preview URL**

1. **复制整个 Preview URL**（从 `https://` 开始到结尾）
2. **在浏览器的新标签页中打开这个 URL**
3. **不要直接访问 Shopify 后台的应用页面！**

**步骤3：完成安装**

打开 Preview URL 后，应该会看到：
1. Shopify 的授权页面
2. 显示应用需要哪些权限
3. 点击 **"Install"** 或 **"安装"** 按钮
4. 完成安装后，会自动重定向到应用界面

### 方法2：如果 Preview URL 不可用

如果 Terminal 1 中没有显示 Preview URL，或者 Preview URL 不可用：

**步骤1：在 Shopify 后台手动安装**

1. **进入 Shopify 后台**
   - 访问：`https://ezproduct-test-store.myshopify.com/admin`

2. **进入应用设置**
   - 点击左侧菜单的 **"设置"** (Settings)
   - 点击 **"应用和销售渠道"** (Apps and sales channels)
   - 或者直接访问：`https://ezproduct-test-store.myshopify.com/admin/settings/apps`

3. **开发应用**
   - 找到 **"开发应用"** (Development apps) 部分
   - 找到 **"EZProduct"**
   - 点击 **"安装"** (Install)

### 方法3：清理并重新安装

如果以上方法都不行，可能需要清理数据库并重新安装：

**步骤1：清理数据库中的会话**

在 Terminal 4（测试终端）中运行：

```bash
cd /Users/Zhuanz/cursor/resinmemory_product/ezproduct
npx prisma studio
```

这会打开 Prisma Studio，你可以：
1. 找到 `Shop` 表
2. 删除所有记录
3. 关闭 Prisma Studio

**步骤2：重新启动服务器**

1. **停止所有服务器**（Terminal 1 和 Terminal 3）
   - 按 `Ctrl + C`

2. **重新启动**
   - Terminal 1: `npm run dev`
   - Terminal 3: `npm run dev:remix`

**步骤3：使用 Preview URL 重新安装**

使用 Terminal 1 中显示的 Preview URL 重新安装应用。

## 📝 请告诉我

1. **Terminal 1 中是否显示了 Preview URL？**
   - 如果显示了，请复制完整的 URL 给我

2. **你尝试打开 Preview URL 了吗？**
   - 如果打开了，发生了什么？
   - 是否显示了授权页面？
   - 或者显示了错误？

3. **你现在是如何访问应用的？**
   - 直接访问 Shopify 后台的应用页面？
   - 还是通过 Preview URL？

这些信息将帮助我确定问题所在。

