# 解决权限和网络问题

## 🔴 当前问题

1. **权限问题**：无法全局安装Shopify CLI（EACCES错误）
2. **网络问题**：无法连接到Google Cloud Storage（ECONNRESET错误）

## ✅ 解决方案

### 方案1：使用sudo安装CLI（快速解决权限问题）

```bash
# 使用sudo全局安装
sudo npm install -g @shopify/cli@latest
```

输入你的Mac密码，然后重新启动：
```bash
npm run dev
```

### 方案2：使用本地CLI（推荐，避免权限问题）

不需要全局安装，使用项目本地的CLI：

```bash
# 停止当前进程（Ctrl + C）

# 使用npx运行（使用项目本地的CLI）
npx shopify app dev
```

### 方案3：解决网络问题（如果方案1/2不行）

网络错误可能是：
- 防火墙阻止
- VPN问题
- 网络不稳定

尝试：

```bash
# 1. 停止当前进程（Ctrl + C）

# 2. 清理缓存
rm -rf .shopify

# 3. 使用本地模式（不依赖外部服务）
npx shopify app dev --local
```

### 方案4：检查并修复网络连接

```bash
# 测试网络连接
ping google.com

# 如果使用VPN，尝试关闭或切换节点
# 然后重新启动
npm run dev
```

## 🎯 推荐操作顺序

### 第一步：解决权限问题

```bash
# 使用sudo安装CLI
sudo npm install -g @shopify/cli@latest
```

### 第二步：清理并重新启动

```bash
# 清理缓存
rm -rf .shopify

# 重新启动
npm run dev
```

### 如果还是网络错误，使用本地模式：

```bash
# 停止进程（Ctrl + C）

# 使用本地模式
npx shopify app dev --local
```

## 📝 详细说明

### 为什么会有权限问题？

全局安装npm包需要写入 `/usr/local/lib/node_modules/`，这需要管理员权限。

### 为什么会有网络错误？

Shopify CLI需要从Google Cloud Storage获取应用部署信息，如果网络不稳定或被阻止，就会失败。

### 本地模式 vs 正常模式

- **正常模式**：需要网络连接，自动处理URL更新
- **本地模式**：不依赖外部服务，但需要手动配置URL

## 🆘 如果所有方案都不行

可以尝试：

1. **检查防火墙设置**
2. **重启网络连接**
3. **使用不同的网络环境**
4. **联系Shopify支持**

## 💡 临时解决方案

如果急需测试，可以：
1. 先修复代码中的问题
2. 稍后再解决网络问题
3. 或者使用生产环境部署（Vercel）




