# ç¬¬å››æ­¥ï¼šåˆ›å»º.envæ–‡ä»¶å¹¶é…ç½®

## âœ… å·²ä¿®å¤çš„é—®é¢˜

æˆ‘å·²ç»ä¿®å¤äº†Prisma schemaä¸­çš„é”™è¯¯ï¼ˆSQLiteä¸æ”¯æŒ`@db.Text`ï¼‰ã€‚çŽ°åœ¨ä½ å¯ä»¥ç»§ç»­æ‰§è¡Œç¬¬ä¸‰æ­¥äº†ï¼š

```bash
npm run db:migrate
```

## ðŸ“‹ ç¬¬å››æ­¥ï¼šåˆ›å»ºå’Œé…ç½®.envæ–‡ä»¶

### æ­¥éª¤1ï¼šåˆ›å»º.envæ–‡ä»¶

åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼š

```bash
cd /Users/Zhuanz/cursor/resinmemory_product/ezproduct
cat > .env << 'EOF'
# Shopify App Configuration
SHOPIFY_API_KEY=ä½ çš„Shopify_API_Key
SHOPIFY_API_SECRET=ä½ çš„Shopify_API_Secret
SCOPES=write_products,read_products,write_product_listings,read_product_listings
SHOPIFY_APP_URL=https://localhost:3000

# Database
DATABASE_URL="file:./dev.db"

# AI API Configuration
GEMINI_API_KEY=ä½ çš„Gemini_API_Key

# App Environment
NODE_ENV=development
EOF
```

### æ­¥éª¤2ï¼šç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥çœŸå®žçš„APIå¯†é’¥

ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼š

```bash
# macOS ä½¿ç”¨
open -e .env

# æˆ–ä½¿ç”¨ VS Code
code .env
```

**éœ€è¦å¡«å…¥çš„å†…å®¹ï¼š**

1. **SHOPIFY_API_KEY** - ä»ŽShopify PartnersèŽ·å–
   - è®¿é—®ï¼šhttps://partners.shopify.com/
   - è¿›å…¥ä½ çš„åº”ç”¨
   - åœ¨ "API credentials" é¡µé¢æ‰¾åˆ° "API Key" æˆ– "Client ID"

2. **SHOPIFY_API_SECRET** - ä»ŽShopify PartnersèŽ·å–
   - åœ¨åŒä¸€ä¸ªé¡µé¢æ‰¾åˆ° "API Secret" æˆ– "Client Secret"

3. **GEMINI_API_KEY** - ä»ŽGoogleèŽ·å–
   - è®¿é—®ï¼šhttps://makersuite.google.com/app/apikey
   - ç‚¹å‡» "Create API Key"
   - å¤åˆ¶ç”Ÿæˆçš„å¯†é’¥

4. **SHOPIFY_APP_URL** - å¼€å‘çŽ¯å¢ƒä¿æŒ `https://localhost:3000` å³å¯

5. **DATABASE_URL** - ä¿æŒ `"file:./dev.db"` å³å¯ï¼ˆSQLiteæœ¬åœ°æ•°æ®åº“ï¼‰

### æ­¥éª¤3ï¼šæ›´æ–°shopify.app.toml

ç¼–è¾‘ `shopify.app.toml` æ–‡ä»¶ï¼š

```bash
open -e shopify.app.toml
```

æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
```toml
client_id = "YOUR_CLIENT_ID"
```

æ›¿æ¢ä¸ºä½ çš„Client IDï¼ˆä»ŽShopify PartnersèŽ·å–ï¼Œé€šå¸¸å’ŒAPI Keyç›¸åŒï¼‰ï¼š
```toml
client_id = "ä½ çš„Client_ID"
```

## ðŸ”‘ èŽ·å–APIå¯†é’¥çš„è¯¦ç»†æ­¥éª¤

### Google Gemini API Key

1. è®¿é—®ï¼šhttps://makersuite.google.com/app/apikey
2. å¦‚æžœæ²¡æœ‰ç™»å½•ï¼Œå…ˆç™»å½•Googleè´¦å·
3. ç‚¹å‡» **"Create API Key"** æŒ‰é’®
4. é€‰æ‹©é¡¹ç›®ï¼ˆæˆ–åˆ›å»ºæ–°é¡¹ç›®ï¼‰
5. å¤åˆ¶ç”Ÿæˆçš„APIå¯†é’¥
6. ç²˜è´´åˆ° `.env` æ–‡ä»¶çš„ `GEMINI_API_KEY=`

### Shopify APIå‡­è¯

1. è®¿é—®ï¼šhttps://partners.shopify.com/
2. ç™»å½•ä½ çš„Partnerè´¦å·
3. å¦‚æžœæ²¡æœ‰åº”ç”¨ï¼Œå…ˆåˆ›å»ºï¼š
   - ç‚¹å‡»å·¦ä¾§ **"åº”ç”¨åˆ†å‘" (App Distribution)**
   - ç‚¹å‡» **"åˆ›å»ºåº”ç”¨" (Create app)**
   - é€‰æ‹© **"åˆ›å»ºè‡ªå®šä¹‰åº”ç”¨" (Create custom app)**
   - å¡«å†™åº”ç”¨åç§°ï¼š`EZProduct`
4. è¿›å…¥ä½ çš„åº”ç”¨
5. æ‰¾åˆ° **"API credentials"** æˆ– **"APIå‡­è¯"** é¡µé¢
6. å¤åˆ¶ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Client ID** æˆ– **API Key** â†’ å¡«å…¥ `.env` çš„ `SHOPIFY_API_KEY` å’Œ `shopify.app.toml` çš„ `client_id`
   - **Client Secret** æˆ– **API Secret** â†’ å¡«å…¥ `.env` çš„ `SHOPIFY_API_SECRET`

## âœ… éªŒè¯é…ç½®

å®Œæˆé…ç½®åŽï¼ŒéªŒè¯æ–‡ä»¶ï¼š

```bash
# æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .env

# æ£€æŸ¥.envæ–‡ä»¶å†…å®¹ï¼ˆä¸æ˜¾ç¤ºæ•æ„Ÿä¿¡æ¯ï¼‰
grep -v "KEY\|SECRET" .env

# æ£€æŸ¥shopify.app.toml
grep "client_id" shopify.app.toml
```

## ðŸ“ .envæ–‡ä»¶ç¤ºä¾‹ï¼ˆå¡«å…¥åŽåº”è¯¥æ˜¯è¿™æ ·ï¼‰

```env
# Shopify App Configuration
SHOPIFY_API_KEY=abc123def456ghi789
SHOPIFY_API_SECRET=xyz789secret123key456
SCOPES=write_products,read_products,write_product_listings,read_product_listings
SHOPIFY_APP_URL=https://localhost:3000

# Database
DATABASE_URL="file:./dev.db"

# AI API Configuration
GEMINI_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# App Environment
NODE_ENV=development
```

## âš ï¸ é‡è¦æç¤º

1. **ä¸è¦æäº¤.envæ–‡ä»¶åˆ°Git**
   - `.env` æ–‡ä»¶å·²ç»åœ¨ `.gitignore` ä¸­
   - åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œä¸è¦åˆ†äº«ç»™ä»–äºº

2. **APIå¯†é’¥æ ¼å¼**
   - Gemini API Keyï¼šé€šå¸¸ä»¥ `AIzaSy` å¼€å¤´
   - Shopify API Keyï¼šé€šå¸¸æ˜¯éšæœºå­—ç¬¦ä¸²
   - ç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–å¼•å·

3. **å¦‚æžœè¿˜æ²¡æœ‰Shopifyåº”ç”¨**
   - å¯ä»¥å…ˆå¡«å…¥å ä½ç¬¦
   - ç¨åŽåœ¨Shopify Partnersä¸­åˆ›å»ºåº”ç”¨åŽå†æ›´æ–°

## ðŸŽ¯ å®Œæˆç¬¬å››æ­¥åŽ

é…ç½®å®ŒæˆåŽï¼Œå°±å¯ä»¥æ‰§è¡Œç¬¬äº”æ­¥äº†ï¼š

```bash
npm run dev
```

è¿™ä¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ŒShopify CLIä¼šè‡ªåŠ¨å¤„ç†ç½‘ç»œç©¿é€ã€‚

